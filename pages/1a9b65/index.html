<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>用python进行数据分析 | WenAn&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <meta name="description" content="web前端后端技术博客,简洁至上,专注web前端后端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,java,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#0e7415">
    <link rel="preload" href="/assets/css/0.styles.5855743d.css" as="style"><link rel="preload" href="/assets/js/app.15790d56.js" as="script"><link rel="preload" href="/assets/js/2.e9821628.js" as="script"><link rel="preload" href="/assets/js/11.115a4f25.js" as="script"><link rel="prefetch" href="/assets/js/10.c6b7b7e0.js"><link rel="prefetch" href="/assets/js/12.5ff1b78a.js"><link rel="prefetch" href="/assets/js/13.c5ec9bc0.js"><link rel="prefetch" href="/assets/js/14.327ddbbe.js"><link rel="prefetch" href="/assets/js/15.1fa1262c.js"><link rel="prefetch" href="/assets/js/16.51899e99.js"><link rel="prefetch" href="/assets/js/17.36611df9.js"><link rel="prefetch" href="/assets/js/18.afa32045.js"><link rel="prefetch" href="/assets/js/3.8236ce55.js"><link rel="prefetch" href="/assets/js/4.0723a8f2.js"><link rel="prefetch" href="/assets/js/5.cbee5800.js"><link rel="prefetch" href="/assets/js/6.47221dbf.js"><link rel="prefetch" href="/assets/js/7.84154062.js"><link rel="prefetch" href="/assets/js/8.cf5acc09.js"><link rel="prefetch" href="/assets/js/9.d2936119.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5855743d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/nav_logo.png" alt="WenAn's blog" class="logo"> <span class="site-name can-hide">WenAn's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python语法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bef152/" class="nav-link">Python基础语法</a></li></ul></li><li class="dropdown-item"><h4>Python爬虫</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/245196/" class="nav-link">Urllib</a></li></ul></li><li class="dropdown-item"><h4>Python数据分析</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1a9b65/" aria-current="page" class="nav-link router-link-exact-active router-link-active">数据分析</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Coding" class="dropdown-title"><a href="/coding/" class="link-title">Coding</a> <span class="title" style="display:none;">Coding</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">Python</a></li></ul></div></div><div class="nav-item"><a href="/tips/" class="nav-link">Tips</a></div><div class="nav-item"><a href="/others/" class="nav-link">Others</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/cwenan/blog.img/20210924193442.jpg"> <div class="blogger-info"><h3>WenAn_Chen</h3> <span>面向Bug开发</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python语法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bef152/" class="nav-link">Python基础语法</a></li></ul></li><li class="dropdown-item"><h4>Python爬虫</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/245196/" class="nav-link">Urllib</a></li></ul></li><li class="dropdown-item"><h4>Python数据分析</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1a9b65/" aria-current="page" class="nav-link router-link-exact-active router-link-active">数据分析</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Coding" class="dropdown-title"><a href="/coding/" class="link-title">Coding</a> <span class="title" style="display:none;">Coding</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">Python</a></li></ul></div></div><div class="nav-item"><a href="/tips/" class="nav-link">Tips</a></div><div class="nav-item"><a href="/others/" class="nav-link">Others</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Python</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Python基础语法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Python爬虫</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Python数据分析</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1a9b65/" aria-current="page" class="active sidebar-link">用python进行数据分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1a9b65/#numpy" class="sidebar-link">Numpy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1a9b65/#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#ndarray" class="sidebar-link">ndarray</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组的维数" class="sidebar-link">数组的维数</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组操作" class="sidebar-link">数组操作</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数据类型" class="sidebar-link">数据类型</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#numpy-中的数据类型" class="sidebar-link">NumPy 中的数据类型</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组和视图" class="sidebar-link">数组和视图</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组形状" class="sidebar-link">数组形状</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组重塑" class="sidebar-link">数组重塑</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组迭代" class="sidebar-link">数组迭代</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组连接" class="sidebar-link">数组连接</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#沿高度堆叠-深度" class="sidebar-link">沿高度堆叠（深度）</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组拆分" class="sidebar-link">数组拆分</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组搜索" class="sidebar-link">数组搜索</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组排序" class="sidebar-link">数组排序</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#数组筛选" class="sidebar-link">数组筛选</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#随机数" class="sidebar-link">随机数</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#ufuncs" class="sidebar-link">ufuncs</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#pandas" class="sidebar-link">pandas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1a9b65/#series" class="sidebar-link">series</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#dataframe" class="sidebar-link">DataFrame</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#pandas再入门" class="sidebar-link">pandas再入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1a9b65/#快速准备" class="sidebar-link">快速准备</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#存储数据的多维数组-ndarray" class="sidebar-link">存储数据的多维数组（ndarray）</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#numpy常量" class="sidebar-link">numpy常量</a></li><li class="sidebar-sub-header"><a href="/pages/1a9b65/#series-2" class="sidebar-link">series</a></li></ul></li></ul></li></ul></section></li></ul></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/coding" title="coding-目录页" data-v-1cd794fe>coding</a></li> <li data-v-1cd794fe><a href="/coding/#Python" title="coding#Python" data-v-1cd794fe>Python</a></li> <li data-v-1cd794fe><a href="/coding/#Python数据分析" title="coding#Python数据分析" data-v-1cd794fe>Python数据分析</a></li></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/cwenan" target="_blank" title="作者" class="beLink" data-v-1cd794fe>问安</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-09-22</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          用python进行数据分析
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h2 id="numpy"><a href="#numpy" class="header-anchor">#</a> Numpy</h2> <p>引入numpy：<code>import numpy as np</code></p> <h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <h4 id="np-arange"><a href="#np-arange" class="header-anchor">#</a> np.arange()</h4> <p>函数返回一个有终点和起点的固定步长的排列，如[1,2,3,4,5]，起点是1，终点是5，步长为1。
参数个数情况： np.arange()函数分为一个参数，两个参数，三个参数三种情况
1）一个参数时，参数值为终点，起点取默认值0，步长取默认值1。
2）两个参数时，第一个参数为起点，第二个参数为终点，步长取默认值1。
3）三个参数时，第一个参数为起点，第二个参数为终点，第三个参数为步长。其中步长支持小数</p> <h3 id="ndarray"><a href="#ndarray" class="header-anchor">#</a> ndarray</h3> <p>⼀种多维数组对象</p> <p>NumPy最重要的⼀个特点就是其N维数组对象（即ndarray），该对象是⼀个快速⽽灵活的⼤数据集容器。你可以利⽤这种数组
对整块数据执⾏⼀些数学运算，其语法跟标量元素之间的运算⼀样。</p> <p><strong>创建 NumPy ndarray 对象</strong></p> <ul><li><p>使用 array() 函数创建一个 NumPy ndarray 对象。</p></li> <li><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
array <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>要创建 ndarray，我们可以<strong>将列表、元组或任何类似数组的对象传递给 array() 方法</strong>，然后它将被转换为 ndarray</p></li></ul> <h3 id="数组的维数"><a href="#数组的维数" class="header-anchor">#</a> 数组的维数</h3> <p>数组中的维是数组深度（嵌套数组）的一个级别。**嵌套数组：**指的是将数组作为元素的数组。</p> <ul><li>0-D 数组，或标量（Scalars），是数组中的元素。数组中的每个值都是一个 0-D 数组， 单个值（如10）</li> <li>1-D数组，其元素为 0-D 数组的数组，称为一维或 1-D 数组。这是最常见和基础的数组。如（1， 2， 3， 4）</li> <li>2-D数组，其元素为 1-D 数组的数组，称为 2-D 数组。它们通常用于表示矩阵或二阶张量。[[1, 2, 3], [4, 5, 6]]</li> <li>3-D数组，其元素为 2-D 数组的数组，称为 3-D 数组。[[[1, 2, 3], [4, 5, 6]], [[1, 2, 3], [4, 5, 6]]]</li> <li><strong>检查数组的维数：array.ndim</strong></li> <li>NumPy 有一个专门用于矩阵运算的完整子模块 <strong>numpy.mat</strong></li> <li>更高维数：数组可以拥有任意数量的维。在创建数组时，可以使用 ndmin 参数定义维数。
<ul><li><code>arr = np.array([1, 2, 3, 4], ndmin=5)</code></li></ul></li></ul> <h3 id="数组操作"><a href="#数组操作" class="header-anchor">#</a> 数组操作</h3> <h4 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h4> <p>与数组一致</p> <h4 id="裁切"><a href="#裁切" class="header-anchor">#</a> 裁切</h4> <p>python 中裁切的意思是将元素从一个给定的索引带到另一个给定的索引。</p> <p>我们像这样传递切片而不是索引：[<em>start</em>：<em>end</em>]。</p> <p>我们还可以定义步长，如下所示：[<em>start</em>：<em>end</em>：<em>step</em>]。</p> <ul><li><p>如果我们不传递 <em>start</em>，则将其视为 0。</p></li> <li><p>如果我们不传递 <em>end</em>，则视为该维度内数组的长度。</p></li> <li><p>如果我们不传递 <em>step</em>，则视为 1。</p></li></ul> <p>数组切片<strong>左闭右开</strong></p> <h3 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h3> <h3 id="numpy-中的数据类型"><a href="#numpy-中的数据类型" class="header-anchor">#</a> NumPy 中的数据类型</h3> <p>NumPy 有一些额外的数据类型，并通过一个字符引用数据类型，例如 i 代表整数，u 代表无符号整数等。</p> <p>以下是 NumPy 中所有数据类型的列表以及用于表示它们的字符。</p> <ul><li>i - 整数</li> <li>b - 布尔</li> <li>u - 无符号整数</li> <li>f - 浮点</li> <li>c - 复合浮点数</li> <li>m - timedelta</li> <li>M - datetime</li> <li>O - 对象</li> <li>S - 字符串</li> <li>U - unicode 字符串</li> <li>V - 固定的其他类型的内存块 ( void )</li></ul> <p><strong>查看数据类型：array.dtype</strong>用已定义的数据类型创建数组</p> <p><strong>定义数组数据类型</strong></p> <p>我们使用 array() 函数来创建数组，该函数可以使用可选参数：dtype，它允许我们定义数组元素的预期数据类型：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token string">'S'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>数值转换错误</strong></p> <p>如果给出了不能强制转换元素的类型，则 NumPy 将引发 ValueError。</p> <p>ValueError：在 Python 中，如果传递给函数的参数的类型是非预期或错误的，则会引发 ValueError。</p> <p>如无法将非整数字符串（比如 'a'）转换为整数</p> <p><strong>转换已有数值的类型</strong></p> <p>更改现有数组的数据类型的最佳方法，是使用 <strong>astype() 方法复制该数组</strong>。</p> <p><strong>astype() 函数创建数组的副本，并允许您将数据类型指定为参数。</strong></p> <p>数据类型可以使用字符串指定，例如 'f' 表示浮点数，'i' 表示整数等。或者您也可以直接使用数据类型，例如 float 表示浮点数，int 表示整数。</p> <h3 id="数组和视图"><a href="#数组和视图" class="header-anchor">#</a> 数组和视图</h3> <p>副本和数组视图之间的主要区别在于<strong>副本是一个新数组，而这个视图只是原始数组的视图。</strong></p> <p>副本拥有数据，对副本所做的任何更改<strong>都不会</strong>影响原始数组，对原始数组所做的任何更改也不会影响副本。</p> <p>视图不拥有数据，对视图所做的任何更改<strong>都会</strong>影响原始数组，而对原始数组所做的任何更改都会影响视图。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 副本</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> arr<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 视图</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> arr<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>检查数组是否拥有数据</strong></p> <p>如上所述，副本拥有数据，而视图不拥有数据，但是我们如何检查呢？</p> <p>每个 NumPy 数组都有一个属性 base，如果该数组拥有数据，则这个 base 属性返回 None。否则，base 属性将引用原始对象。</p> <h3 id="数组形状"><a href="#数组形状" class="header-anchor">#</a> 数组形状</h3> <p>NumPy 数组有一个名为 shape 的属性，该属性返回一个元组，每个索引具有相应元素的数量。</p> <p><code>array.shape</code></p> <h3 id="数组重塑"><a href="#数组重塑" class="header-anchor">#</a> 数组重塑</h3> <p>重塑意味着更改数组的形状。</p> <p>数组的形状是每个维中元素的数量。</p> <p>通过重塑，我们可以添加或删除维度或更改每个维度中的元素数量。</p> <p><strong>从 1-D 重塑为 2-D</strong></p> <p>将以下具有 12 个元素的 1-D 数组转换为 2-D 数组。</p> <p>最外面的维度将有 4 个数组，每个数组包含 3 个元素</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
newarr <span class="token operator">=</span> arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>从 1-D 重塑为 3-D</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

newarr <span class="token operator">=</span> arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以重塑成所有形状的数组，只要重塑所需的元素在两种形状中均相等。</p> <p><strong>检查返回的是视图</strong></p> <p><strong>维度数值确认</strong></p> <p>您可以使用一个“未知”维度。</p> <p>这意味着您不必在 reshape 方法中为维度之一指定确切的数字。</p> <p>传递 <strong>-1</strong> 作为值，NumPy 将为您计算该数字。</p> <blockquote><p>-1只能放到第一维度</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

newarr <span class="token operator">=</span> arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>展平数据</strong></p> <p>把其他维度的数据展示为一维的数据：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

newarr <span class="token operator">=</span> arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="数组迭代"><a href="#数组迭代" class="header-anchor">#</a> 数组迭代</h3> <h4 id="简单迭代"><a href="#简单迭代" class="header-anchor">#</a> 简单迭代</h4> <p>使用for循环，如遍历3-D数组</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> x <span class="token keyword">in</span> arr<span class="token punctuation">:</span>
  <span class="token keyword">for</span> y <span class="token keyword">in</span> x<span class="token punctuation">:</span>
    <span class="token keyword">for</span> z <span class="token keyword">in</span> y<span class="token punctuation">:</span>
      <span class="token keyword">print</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="使用-nditer-迭代数组"><a href="#使用-nditer-迭代数组" class="header-anchor">#</a> 使用 nditer() 迭代数组</h4> <p>它会自动遍历各个维度里面的元素</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> x <span class="token keyword">in</span> np<span class="token punctuation">.</span>nditer<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>迭代时更改数组的数据类型</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> x <span class="token keyword">in</span> np<span class="token punctuation">.</span>nditer<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'buffered'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> op_dtypes<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'S'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>以不同的步长迭代</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> x <span class="token keyword">in</span> np<span class="token punctuation">.</span>nditer<span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="使用-ndenumerate-进行枚举迭代"><a href="#使用-ndenumerate-进行枚举迭代" class="header-anchor">#</a> 使用 ndenumerate() 进行枚举迭代</h4> <p>可以获取数组的序号</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> idx<span class="token punctuation">,</span> x <span class="token keyword">in</span> np<span class="token punctuation">.</span>ndenumerate<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="数组连接"><a href="#数组连接" class="header-anchor">#</a> 数组连接</h3> <p>连接意味着将两个或多个数组的内容放在单个数组中。</p> <p>我们传递了一系列要与轴一起连接到 <code>concatenate()</code>函数的数组。如果未显式传递轴，则将其视为 0。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>沿着行 (axis=1) 连接两个 2-D 数组</p> <p><strong>可以理解为0轴就是对序列计算咯，1轴就是对序列组成的行计算咯，2轴就是对从三维的角度来看</strong></p> <p><strong>沿着行堆叠</strong></p> <p>NumPy 提供了一个辅助函数：hstack() 沿行堆叠。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>hstack<span class="token punctuation">(</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

<span class="token comment">#  [1 2 3 4 5 6]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>沿着列堆叠</strong></p> <p>NumPy 提供了一个辅助函数：vstack() 沿列堆叠。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>vstack<span class="token punctuation">(</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="沿高度堆叠-深度"><a href="#沿高度堆叠-深度" class="header-anchor">#</a> 沿高度堆叠（深度）</h3> <p>NumPy 提供了一个辅助函数：dstack() 沿高度堆叠，该高度与深度相同。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>dstack<span class="token punctuation">(</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="数组拆分"><a href="#数组拆分" class="header-anchor">#</a> 数组拆分</h3> <p>连接（Joining）是将多个数组合并为一个，拆分（Spliting）将一个数组拆分为多个。</p> <p>我们使用 <code>array_split()</code> 分割数组，将要分割的数组和分割数传递给它。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

newarr <span class="token operator">=</span> np<span class="token punctuation">.</span>array_split<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">)</span>
<span class="token comment"># 访问数组元素</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>**注释：**返回值是一个包含三个数组的数组。</p> <p>如果数组中的元素少于要求的数量，它将从末尾进行相应调整。</p> <blockquote><p>我们也有 split() 方法可用，但是当源数组中的元素较少用于拆分时，它将不会调整元素，如上例那样，array_split() 正常工作，但 split() 会失败。</p></blockquote> <p>下面的例子还返回三个 2-D 数组，但它们沿行 (axis=1) 分割。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

newarr <span class="token operator">=</span> np<span class="token punctuation">.</span>array_split<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>另一种解决方案是使用与 hstack() 相反的 hsplit()。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

newarr <span class="token operator">=</span> np<span class="token punctuation">.</span>hsplit<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>vsplit() 和 dsplit() 可以使用与 vstack() 和 dstack() 类似的替代方法。</p></blockquote> <h3 id="数组搜索"><a href="#数组搜索" class="header-anchor">#</a> 数组搜索</h3> <p>使用<code>where()</code>数组中搜索（检索）某个值，然后返回获得匹配的索引。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 查找4的索引，返回4的位置索引数组</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>有一个名为 searchsorted() 的方法，该方法在数组中执行二进制搜索，并返回将在其中插入指定值以维持搜索顺序的索引。</p> <p>假定 searchsorted() 方法用于排序数组。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>searchsorted<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="数组排序"><a href="#数组排序" class="header-anchor">#</a> 数组排序</h3> <p>使用<code>sort</code>来排序</p> <p>此方法返回数组的副本，而原始数组保持不变。您还可以对字符串数组或任何其他数据类型进行排序：</p> <h3 id="数组筛选"><a href="#数组筛选" class="header-anchor">#</a> 数组筛选</h3> <p>从现有数组中取出一些元素并从中创建新数组称为过滤（filtering）。</p> <p>在 NumPy 中，我们使用<strong>布尔索引</strong>列表来过滤数组。</p> <p>布尔索引列表是与数组中的索引相对应的布尔值列表。</p> <p><strong>如果索引处的值为 True，则该元素包含在过滤后的数组中；如果索引处的值为 False，则该元素将从过滤后的数组中排除。</strong></p> <p>例子1</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">]</span>

newarr <span class="token operator">=</span> arr<span class="token punctuation">[</span>x<span class="token punctuation">]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">)</span>
<span class="token comment"># 返回值为[61, 63, 65]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>列子2</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 创建一个空列表</span>
filter_arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment"># 遍历 arr 中的每个元素</span>
<span class="token keyword">for</span> element <span class="token keyword">in</span> arr<span class="token punctuation">:</span>
  <span class="token comment"># 如果元素大于 62，则将值设置为 True，否则为 False：</span>
  <span class="token keyword">if</span> element <span class="token operator">&gt;</span> <span class="token number">62</span><span class="token punctuation">:</span>
    filter_arr<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
  <span class="token keyword">else</span><span class="token punctuation">:</span>
    filter_arr<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>

newarr <span class="token operator">=</span> arr<span class="token punctuation">[</span>filter_arr<span class="token punctuation">]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>filter_arr<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>语法糖</p> <p>我们可以在条件中直接替换数组而不是 iterable 变量</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 创建一个仅返回大于 62 的值的过滤器数组</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

filter_arr <span class="token operator">=</span> arr <span class="token operator">&gt;</span> <span class="token number">62</span>

newarr <span class="token operator">=</span> arr<span class="token punctuation">[</span>filter_arr<span class="token punctuation">]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>filter_arr<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">)</span>



<span class="token comment"># 创建一个过滤器数组，该数组仅返回原始数组中的偶数元素</span>

<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

filter_arr <span class="token operator">=</span> arr <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>

newarr <span class="token operator">=</span> arr<span class="token punctuation">[</span>filter_arr<span class="token punctuation">]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>filter_arr<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>newarr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="随机数"><a href="#随机数" class="header-anchor">#</a> 随机数</h3> <h4 id="伪随机和真随机"><a href="#伪随机和真随机" class="header-anchor">#</a> 伪随机和真随机</h4> <p>计算机在程序上工作，程序是权威的指令集。因此，这意味着必须有某种算法来生成随机数。</p> <p>如果存在生成随机数的程序，则可以预测它，因此它就不是真正的随机数。</p> <p>通过生成算法生成的随机数称为<strong>伪随机数</strong>。</p> <p>我们可以生成真正的随机数吗？</p> <p>是的。为了在我们的计算机上生成一个真正的随机数，我们需要从某个外部来源获取随机数据。外部来源通常是我们的击键、鼠标移动、网络数据等。</p> <p>我们不需要真正的随机数，除非它与安全性（例如加密密钥）有关或应用的基础是随机性（例如数字轮盘赌轮）。</p> <p>在本教程中，我们将使用伪随机数。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 生成一个 0 到 100 之间的随机整数：</span>
<span class="token keyword">from</span> numpy <span class="token keyword">import</span> random

x <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>


<span class="token comment"># random 模块的 rand() 方法返回 0 到 1 之间的随机浮点数。</span>
<span class="token comment"># 生成一个 0 到 1 之间的随机浮点数：</span>
<span class="token keyword">from</span> numpy <span class="token keyword">import</span> random

x <span class="token operator">=</span> random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="生成随机数组"><a href="#生成随机数组" class="header-anchor">#</a> 生成随机数组</h4> <p>randint() 方法接受 size 参数，您可以在其中指定数组的形状。</p> <p><strong>整数</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 生成一个 1-D 数组，其中包含 5 个从 0 到 100 之间的随机整数：</span>
<span class="token keyword">from</span> numpy <span class="token keyword">import</span> random

x<span class="token operator">=</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>


<span class="token comment"># 生成有 3 行的 2-D 数组，每行包含 5 个从 0 到 100 之间的随机整数</span>
<span class="token keyword">from</span> numpy <span class="token keyword">import</span> random

x <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>浮点数</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># rand() 方法还允许您指定数组的形状。</span>
<span class="token keyword">from</span> numpy <span class="token keyword">import</span> random

x <span class="token operator">=</span> random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>


<span class="token comment"># 生成有 3 行的 2-D 数组，每行包含 5 个随机数</span>
<span class="token keyword">from</span> numpy <span class="token keyword">import</span> random

x <span class="token operator">=</span> random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>从数组生成随机值</strong></p> <p><code>choice()</code> 方法使您可以基于值数组生成随机值。方法将数组作为参数，并随机返回其中一个值。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> numpy <span class="token keyword">import</span> random

x <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>choice() 方法还允许您返回一个值数组，请添加一个 size 参数以指定数组的形状。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> numpy <span class="token keyword">import</span> random

x <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ufuncs"><a href="#ufuncs" class="header-anchor">#</a> ufuncs</h3> <p>通用函数</p> <p><strong>什么是向量化？</strong></p> <p>将迭代语句转换为基于向量的操作称为向量化。</p> <p><strong>对两个列表的元素进行相加：</strong></p> <p>list 1: [1, 2, 3, 4]</p> <p>list 2: [4, 5, 6, 7]</p> <ul><li><p>一种方法是遍历两个列表，然后对每个元素求和。</p></li> <li><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 使用内置的zip()函数</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> j <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
  z<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i <span class="token operator">+</span> j<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 通过 ufunc，我们可以使用 add() 函数：</span>

<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
z <span class="token operator">=</span> np<span class="token punctuation">.</span>add<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li></li></ul> <h2 id="pandas"><a href="#pandas" class="header-anchor">#</a> pandas</h2> <p>pandas是专门为处理表格和混杂数据设计的。而NumPy更适合处理统一的数值数组数据。</p> <p>引入pandas</p> <p><code>import pandas as pd</code></p> <p>两个主要数据结构：<strong>Series和DataFrame</strong></p> <h3 id="series"><a href="#series" class="header-anchor">#</a> series</h3> <p>Series是一种类似于一维数组的对象，它由一组数据（各种NumPy数据类型）以及一组与之相关的数据标签（即索引）组成。仅由一组数据即可产生最简单的Series</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

In <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj
Out<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
<span class="token number">0</span>    <span class="token number">4</span>
<span class="token number">1</span>    <span class="token number">7</span>
<span class="token number">2</span>   <span class="token operator">-</span><span class="token number">5</span>
<span class="token number">3</span>    <span class="token number">3</span>
dtype<span class="token punctuation">:</span> int64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>Series的字符串表现形式为：索引在左边，值在右边。</li> <li>由于我们没有为数据指定索引，于是会自动创建一个0到N-1（N为数据的长度）的整数型索引。</li> <li>你可以通过Series <strong>的values和index属性</strong>获取其数组表示形式和索引对象</li></ul> <p>创建series带索引：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

In <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj2
Out<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
d    <span class="token number">4</span>
b    <span class="token number">7</span>
a   <span class="token operator">-</span><span class="token number">5</span>
c    <span class="token number">3</span>
dtype<span class="token punctuation">:</span> int64

In <span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj2<span class="token punctuation">.</span>index
Out<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Index<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token string">'object'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>通过索引获取值：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj2<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span>
Out<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">5</span>

In <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj2<span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>

In <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj2<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
Out<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
c    <span class="token number">3</span>
a   <span class="token operator">-</span><span class="token number">5</span>
d    <span class="token number">6</span>
dtype<span class="token punctuation">:</span> int64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>使用NumPy函数或类似NumPy的运算（如根据布尔型数组进行过滤、标量乘法、应用数学函数等）<strong>都会保留索引值的链接</strong></p> <p>series可以看成是一个定长的字典</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 判断是否属于其中的某个值</span>
In <span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'b'</span> <span class="token keyword">in</span> obj2
Out<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token boolean">True</span>

In <span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'e'</span> <span class="token keyword">in</span> obj2
Out<span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token boolean">False</span>
    
   
<span class="token comment"># 通过字典来创建series</span>
In <span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">:</span> sdata <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Ohio'</span><span class="token punctuation">:</span> <span class="token number">35000</span><span class="token punctuation">,</span> <span class="token string">'Texas'</span><span class="token punctuation">:</span> <span class="token number">71000</span><span class="token punctuation">,</span> <span class="token string">'Oregon'</span><span class="token punctuation">:</span> <span class="token number">16000</span><span class="token punctuation">,</span> <span class="token string">'Utah'</span><span class="token punctuation">:</span> <span class="token number">5000</span><span class="token punctuation">}</span>

In <span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>sdata<span class="token punctuation">)</span>

In <span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj3
Out<span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
Ohio      <span class="token number">35000</span>
Oregon    <span class="token number">16000</span>
Texas     <span class="token number">71000</span>
Utah       <span class="token number">5000</span>
dtype<span class="token punctuation">:</span> int64    
 

<span class="token comment"># 如果只传入一个字典，则结果Series中的索引就是原字典的键（有序排列）。你可以传入排好序的字典的键以改变顺序</span>
<span class="token comment"># NAN not a number ，不是数字</span>
In <span class="token punctuation">[</span><span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">:</span> states <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'California'</span><span class="token punctuation">,</span> <span class="token string">'Ohio'</span><span class="token punctuation">,</span> <span class="token string">'Oregon'</span><span class="token punctuation">,</span> <span class="token string">'Texas'</span><span class="token punctuation">]</span>

In <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj4 <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>sdata<span class="token punctuation">,</span> index<span class="token operator">=</span>states<span class="token punctuation">)</span>

In <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj4
Out<span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
California        NaN
Ohio          <span class="token number">35000.0</span>
Oregon        <span class="token number">16000.0</span>
Texas         <span class="token number">71000.0</span>
dtype<span class="token punctuation">:</span> float64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>检查缺失数据：<code>isnull, notnull</code></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">:</span> pd<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span>obj4<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
California     <span class="token boolean">True</span>
Ohio          <span class="token boolean">False</span>
Oregon        <span class="token boolean">False</span>
Texas         <span class="token boolean">False</span>
dtype<span class="token punctuation">:</span> <span class="token builtin">bool</span>

In <span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">:</span> pd<span class="token punctuation">.</span>notnull<span class="token punctuation">(</span>obj4<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
California    <span class="token boolean">False</span>
Ohio           <span class="token boolean">True</span>
Oregon         <span class="token boolean">True</span>
Texas          <span class="token boolean">True</span>
dtype<span class="token punctuation">:</span> <span class="token builtin">bool</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>根据运算的索引标签自动对齐数据</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj3
Out<span class="token punctuation">[</span><span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
Ohio      <span class="token number">35000</span>
Oregon    <span class="token number">16000</span>
Texas     <span class="token number">71000</span>
Utah       <span class="token number">5000</span>
dtype<span class="token punctuation">:</span> int64

In <span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj4
Out<span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
California        NaN
Ohio          <span class="token number">35000.0</span>
Oregon        <span class="token number">16000.0</span>
Texas         <span class="token number">71000.0</span>
dtype<span class="token punctuation">:</span> float64

In <span class="token punctuation">[</span><span class="token number">37</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj3 <span class="token operator">+</span> obj4
Out<span class="token punctuation">[</span><span class="token number">37</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
California         NaN
Ohio           <span class="token number">70000.0</span>
Oregon         <span class="token number">32000.0</span>
Texas         <span class="token number">142000.0</span>
Utah               NaN
dtype<span class="token punctuation">:</span> float64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>series对象本身和索引index都有一个name属性</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj4<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'population'</span>

In <span class="token punctuation">[</span><span class="token number">39</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj4<span class="token punctuation">.</span>index<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'state'</span>

In <span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj4
Out<span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
state
California        NaN
Ohio          <span class="token number">35000.0</span>
Oregon        <span class="token number">16000.0</span>
Texas         <span class="token number">71000.0</span>
Name<span class="token punctuation">:</span> population<span class="token punctuation">,</span> dtype<span class="token punctuation">:</span> float64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>通过赋值修改索引</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">41</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj
Out<span class="token punctuation">[</span><span class="token number">41</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
<span class="token number">0</span>    <span class="token number">4</span>
<span class="token number">1</span>    <span class="token number">7</span>
<span class="token number">2</span>   <span class="token operator">-</span><span class="token number">5</span>
<span class="token number">3</span>    <span class="token number">3</span>
dtype<span class="token punctuation">:</span> int64

In <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Steve'</span><span class="token punctuation">,</span> <span class="token string">'Jeff'</span><span class="token punctuation">,</span> <span class="token string">'Ryan'</span><span class="token punctuation">]</span>

In <span class="token punctuation">[</span><span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">:</span> obj
Out<span class="token punctuation">[</span><span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
Bob      <span class="token number">4</span>
Steve    <span class="token number">7</span>
Jeff    <span class="token operator">-</span><span class="token number">5</span>
Ryan     <span class="token number">3</span>
dtype<span class="token punctuation">:</span> int64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="dataframe"><a href="#dataframe" class="header-anchor">#</a> DataFrame</h3> <p>DataFrame是一个表格型的数据结构，它含有一组有序的列，每列可以是不同的值类型（数值、字符串、布尔值等）。DataFrame既有行索引也有列索引，它可以被看做由Series组成的字典（共用同一个索引）。DataFrame中的数据是以一个或多个二维块存放的（而不是列表、字典或别的一维数据结构）</p> <p><strong>构建dataframe</strong></p> <p>传入对应的字典，dataframe会自动加上索引，并且有序</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'state'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Ohio'</span><span class="token punctuation">,</span> <span class="token string">'Ohio'</span><span class="token punctuation">,</span> <span class="token string">'Ohio'</span><span class="token punctuation">,</span> <span class="token string">'Nevada'</span><span class="token punctuation">,</span> <span class="token string">'Nevada'</span><span class="token punctuation">,</span> <span class="token string">'Nevada'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'year'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">2001</span><span class="token punctuation">,</span> <span class="token number">2002</span><span class="token punctuation">,</span> <span class="token number">2001</span><span class="token punctuation">,</span> <span class="token number">2002</span><span class="token punctuation">,</span> <span class="token number">2003</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'pop'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">1.7</span><span class="token punctuation">,</span> <span class="token number">3.6</span><span class="token punctuation">,</span> <span class="token number">2.4</span><span class="token punctuation">,</span> <span class="token number">2.9</span><span class="token punctuation">,</span> <span class="token number">3.2</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
frame <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><code>df.head()</code>选取前五行数据</li></ul> <p>在创建df时指定列名</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">:</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">,</span> <span class="token string">'state'</span><span class="token punctuation">,</span> <span class="token string">'pop'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
   year   state  pop
<span class="token number">0</span>  <span class="token number">2000</span>    Ohio  <span class="token number">1.5</span>
<span class="token number">1</span>  <span class="token number">2001</span>    Ohio  <span class="token number">1.7</span>
<span class="token number">2</span>  <span class="token number">2002</span>    Ohio  <span class="token number">3.6</span>
<span class="token number">3</span>  <span class="token number">2001</span>  Nevada  <span class="token number">2.4</span>
<span class="token number">4</span>  <span class="token number">2002</span>  Nevada  <span class="token number">2.9</span>
<span class="token number">5</span>  <span class="token number">2003</span>  Nevada  <span class="token number">3.2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="pandas再入门"><a href="#pandas再入门" class="header-anchor">#</a> pandas再入门</h2> <p>https://www.gairuo.com/p/pandas-quick-start</p> <h3 id="快速准备"><a href="#快速准备" class="header-anchor">#</a> 快速准备</h3> <h4 id="读取数据"><a href="#读取数据" class="header-anchor">#</a> 读取数据</h4> <ul><li>本地读取</li> <li>在线读取</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd <span class="token comment"># 引入 pandas 库，按惯例起别名 pd</span>

<span class="token comment"># 以下两种效果一样，如果是网址它会自动下载数据到内存</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'https://www.gairuo.com/file/data/team.xlsx'</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'team.xlsx'</span><span class="token punctuation">)</span> <span class="token comment"># 文件在 notebook 文件同一目录下</span>
<span class="token comment"># 如果是 csv 的话使用 pd.read_csv() ，还支持很多类型的数据读取</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="整体数据描述"><a href="#整体数据描述" class="header-anchor">#</a> 整体数据描述</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>shape <span class="token comment"># (100, 6) 查看行数和列数</span>
df<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 查看索引、数据类型和内存信息</span>
df<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 查看数值型列的汇总统计</span>
df<span class="token punctuation">.</span>dtypes <span class="token comment"># 查看各字段类型</span>
df<span class="token punctuation">.</span>axes <span class="token comment"># 显示数据行和列名</span>
df<span class="token punctuation">.</span>columns <span class="token comment"># 列名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="建立索引"><a href="#建立索引" class="header-anchor">#</a> 建立索引</h4> <ul><li>处理的是dataframe，和原来的excel没有关系</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>set_index<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># 建立索引并生效</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="总体筛选"><a href="#总体筛选" class="header-anchor">#</a> 总体筛选</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>head<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment"># 查看 DataFrame 对象的前n行</span>
df<span class="token punctuation">.</span>tail<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment"># 查看 DataFrame 对象的最后n行</span>
df<span class="token punctuation">.</span>sample<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment"># 查看 n 个样本，随机</span>
df<span class="token punctuation">.</span>index <span class="token comment"># 查看索引内容</span>
df<span class="token punctuation">.</span>columns <span class="token comment"># 查看行名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="选择列"><a href="#选择列" class="header-anchor">#</a> 选择列</h4> <h5 id="选择单列"><a href="#选择单列" class="header-anchor">#</a> 选择单列</h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 查看指定列</span>
df<span class="token punctuation">[</span><span class="token string">'Q1'</span><span class="token punctuation">]</span>
df<span class="token punctuation">.</span>Q1 <span class="token comment"># 同上，如果列名符合 python 变量名要求，可使用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="选择多列"><a href="#选择多列" class="header-anchor">#</a> 选择多列</h5> <p><code>df.loc[x, y]</code> 是一个非常强大的数据选择函数，其中 <code>x</code> 代表行，<code>y</code> 代表列，行和列都支持条件表达式，也支持类似列表那样的切片（如果要用自然索引需要用 <code>df.iloc[]</code>）。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 选择多列</span>
df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'team'</span><span class="token punctuation">,</span> <span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># 只看这两列，注意括号</span>
df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'team'</span><span class="token punctuation">,</span> <span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># 和上边效果一样</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="选择行"><a href="#选择行" class="header-anchor">#</a> 选择行</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 用人工索引选取</span>
df<span class="token punctuation">[</span>df<span class="token punctuation">.</span>index <span class="token operator">==</span> <span class="token string">'Liver'</span><span class="token punctuation">]</span> <span class="token comment"># 指定索引</span>

<span class="token comment"># 用自然索引选择，类似列表的切片</span>
df<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment"># 取前三行,</span>
df<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment"># 前10个，每两个取一个</span>
df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment"># 前10个</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="指定行列"><a href="#指定行列" class="header-anchor">#</a> 指定行列</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token string">'Ben'</span><span class="token punctuation">,</span> <span class="token string">'Q1'</span><span class="token punctuation">:</span><span class="token string">'Q4'</span><span class="token punctuation">]</span> <span class="token comment"># 只看 Ben 的四个季度成绩</span>
df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token string">'Eorge'</span><span class="token punctuation">:</span><span class="token string">'Alexander'</span><span class="token punctuation">,</span> <span class="token string">'team'</span><span class="token punctuation">:</span><span class="token string">'Q4'</span><span class="token punctuation">]</span> <span class="token comment"># 指定行区间</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="条件选择"><a href="#条件选择" class="header-anchor">#</a> 条件选择</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 单一条件</span>
df<span class="token punctuation">[</span>df<span class="token punctuation">.</span>Q1 <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">]</span> <span class="token comment"># Q1 列大于90的</span>
df<span class="token punctuation">[</span>df<span class="token punctuation">.</span>team <span class="token operator">==</span> <span class="token string">'C'</span><span class="token punctuation">]</span> <span class="token comment"># team 列为 'C' 的</span>
df<span class="token punctuation">[</span>df<span class="token punctuation">.</span>index <span class="token operator">==</span> <span class="token string">'Oscar'</span><span class="token punctuation">]</span> <span class="token comment"># 指定索引即原数据中的 name</span>

<span class="token comment"># 组合条件</span>
df<span class="token punctuation">[</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Q1'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'team'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment"># and 关系</span>
df<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'team'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'C'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">.</span>Q1<span class="token operator">&gt;</span><span class="token number">90</span><span class="token punctuation">]</span> <span class="token comment"># 多重筛选</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="排序"><a href="#排序" class="header-anchor">#</a> 排序</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'Q1'</span><span class="token punctuation">)</span> <span class="token comment"># 按 Q1 列数据升序排列</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'Q1'</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment"># 降序</span>

df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'team'</span><span class="token punctuation">,</span> <span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># team 升，Q1 降序</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="分组聚合"><a href="#分组聚合" class="header-anchor">#</a> 分组聚合</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'team'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 按团队分组对应列相加</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'team'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 按团队分组对应列求平均</span>
<span class="token comment"># 不同列不同的计算方法</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'team'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'Q1'</span><span class="token punctuation">:</span> <span class="token builtin">sum</span><span class="token punctuation">,</span>  <span class="token comment"># 总和</span>
                        <span class="token string">'Q2'</span><span class="token punctuation">:</span> <span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token comment"># 总数</span>
                        <span class="token string">'Q3'</span><span class="token punctuation">:</span><span class="token string">'mean'</span><span class="token punctuation">,</span> <span class="token comment"># 平均</span>
                        <span class="token string">'Q4'</span><span class="token punctuation">:</span> <span class="token builtin">max</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># 最大值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="数据转换"><a href="#数据转换" class="header-anchor">#</a> 数据转换</h4> <h5 id="转置"><a href="#转置" class="header-anchor">#</a> 转置</h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'team'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>T
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="stack-and-unstack"><a href="#stack-and-unstack" class="header-anchor">#</a> stack and unstack</h5> <p>1.stack：将数据的列“旋转”为行
2.unstack：将数据的行“旋转”为列
3.stack和unstack默认操作为最内层
4.stack和unstack默认旋转轴的级别将会成果结果中的最低级别（最内层）
5.stack和unstack为一组逆运算操作</p> <h4 id="增加列"><a href="#增加列" class="header-anchor">#</a> 增加列</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment"># 增加一个固定值的列</span>
df<span class="token punctuation">[</span><span class="token string">'total'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>Q1 <span class="token operator">+</span> df<span class="token punctuation">.</span>Q2 <span class="token operator">+</span> df<span class="token punctuation">.</span>Q3 <span class="token operator">+</span> df<span class="token punctuation">.</span>Q4 <span class="token comment"># 增加总成绩列</span>
<span class="token comment"># 指定一些列相加增加一个新列</span>
df<span class="token punctuation">[</span><span class="token string">'total'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token string">'Q1'</span><span class="token punctuation">:</span><span class="token string">'Q4'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'total'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 可以把所有为数字的列相加</span>
df<span class="token punctuation">[</span><span class="token string">'avg'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>total<span class="token operator">/</span><span class="token number">4</span> <span class="token comment"># 增加平均成绩列</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="简单分析-重要"><a href="#简单分析-重要" class="header-anchor">#</a> 简单分析（重要）</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 返回所有列的均值</span>
df<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 返回所有行的均值，下同</span>
df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 返回列与列之间的相关系数</span>
df<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 返回每一列中的非空值的个数</span>
df<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 返回每一列的最大值</span>
df<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 返回每一列的最小值</span>
df<span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 返回每一列的中位数</span>
df<span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 返回每一列的标准差</span>
df<span class="token punctuation">.</span>var<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 方差</span>
s<span class="token punctuation">.</span>mode<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 众数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="画图"><a href="#画图" class="header-anchor">#</a> 画图</h4> <p>中文字体显示问题</p> <p>https://blog.csdn.net/u010758410/article/details/71743225</p> <p>Pandas 利用<code>plot()</code> 调用 <code>matplotlib</code> 快速绘制出数据可视化图形。注意，第一次使用 <code>plot()</code> 时可能需要执行两下才能显示图形。</p> <h5 id="折线图"><a href="#折线图" class="header-anchor">#</a> 折线图</h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">[</span><span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Q1 成绩的折线分布</span>

df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token string">'Ben'</span><span class="token punctuation">,</span><span class="token string">'Q1'</span><span class="token punctuation">:</span><span class="token string">'Q4'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># ben 四个季度的成绩变化</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="柱状图"><a href="#柱状图" class="header-anchor">#</a> 柱状图</h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span> <span class="token string">'Ben'</span><span class="token punctuation">,</span><span class="token string">'Q1'</span><span class="token punctuation">:</span><span class="token string">'Q4'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 柱状图</span>
df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span> <span class="token string">'Ben'</span><span class="token punctuation">,</span><span class="token string">'Q1'</span><span class="token punctuation">:</span><span class="token string">'Q4'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 横向柱状图</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 转置绘图</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'team'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>T<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 各 Team 四个季度总成绩趋势</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="扇形图"><a href="#扇形图" class="header-anchor">#</a> 扇形图</h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'team'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Q1<span class="token punctuation">.</span>plot<span class="token punctuation">.</span>pie<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 各组人数对比</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="导出"><a href="#导出" class="header-anchor">#</a> 导出</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>df<span class="token punctuation">.</span>to_excel<span class="token punctuation">(</span><span class="token string">'team-done.xlsx'</span><span class="token punctuation">)</span> <span class="token comment"># 导出 excel</span>
df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'team-done.csv'</span><span class="token punctuation">)</span> <span class="token comment"># 导出 csv</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="存储数据的多维数组-ndarray"><a href="#存储数据的多维数组-ndarray" class="header-anchor">#</a> 存储数据的多维数组（ndarray）</h3> <table><thead><tr><th>信息</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>维数</td> <td>ndarray.ndim</td> <td>数组的轴（维度）数</td></tr> <tr><td>形状</td> <td>ndarray.shape</td> <td>数组尺寸、规格，这是一个整数元组，指示每个维度中数组的大小</td></tr> <tr><td>大小</td> <td>ndarray.size</td> <td>数组元素的总数</td></tr> <tr><td>类型</td> <td>ndarray.dtype</td> <td>描述数组中元素的类型</td></tr></tbody></table> <h4 id="手动创建ndarray"><a href="#手动创建ndarray" class="header-anchor">#</a> 手动创建ndarray</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 导入 numpy 库, 约定俗成别名为 np</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 同上</span>
<span class="token comment"># array([1, 2, 3])</span>

np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 同上</span>
<span class="token comment"># out:</span>
array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="函数创建"><a href="#函数创建" class="header-anchor">#</a> 函数创建</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment"># 10个, 不包括10，步长为 1</span>
np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token comment"># 从 3 开始到时，步长为 0.1</span>
<span class="token comment"># 从 2.0 开始到 3.0，生成均匀的 5 个值，不包括终终值 3.0</span>
np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">,</span> num<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> endpoint<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
 <span class="token comment"># 返回一个 6x4 的随机数组，float 型</span>
np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token comment"># 指定范围指定形状的数组，整型</span>
np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 创建从0到20随机的5个数组</span>
np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token comment"># array([ 9, 10, 14,  6, 14])</span>
<span class="token comment"># 创建值为 0 的数组</span>
np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment"># 6个浮点 0.</span>
np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token comment"># 5 x 6 整型 0</span>
np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># 同上</span>
np<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># 同上</span>
 <span class="token comment"># 创建一份和目标结构相同的 0 值数组</span>
np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
np<span class="token punctuation">.</span>ones_like<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 同上</span>
np<span class="token punctuation">.</span>empty_like<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 同上</span>
np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># 将4个值依次重复四次，共16个</span>
np<span class="token punctuation">.</span>full<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token comment"># 两行四列值全为 9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>np<span class="token punctuation">.</span>int64 <span class="token comment"># 有符号 64 位 int 类型</span>
np<span class="token punctuation">.</span>float32 <span class="token comment"># 标准双精度浮点类型</span>
np<span class="token punctuation">.</span><span class="token builtin">complex</span> <span class="token comment"># 由128位的浮点数组成的复数类型</span>
np<span class="token punctuation">.</span><span class="token builtin">bool</span> <span class="token comment"># TRUE 和 FALSE 的 bool 类型</span>
np<span class="token punctuation">.</span><span class="token builtin">object</span> <span class="token comment"># Python 中的 object 类型</span>
np<span class="token punctuation">.</span>string <span class="token comment"># 固定长度的 string 类型</span>
np<span class="token punctuation">.</span><span class="token builtin">unicode</span> <span class="token comment"># 固定长度的 unicode 类型</span>

np<span class="token punctuation">.</span>NaN <span class="token comment"># np.float 的子类型</span>
np<span class="token punctuation">.</span>nan
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="数组信息"><a href="#数组信息" class="header-anchor">#</a> 数组信息</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>n<span class="token punctuation">.</span>shape<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 数组的形状, 返回值是一个元组</span>
n<span class="token punctuation">.</span>shape <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 改变形状</span>
a <span class="token operator">=</span> n<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 改变原数组的形状创建一个新的</span>
n<span class="token punctuation">.</span>dtype <span class="token comment"># 数据类型</span>
n<span class="token punctuation">.</span>ndim <span class="token comment"># 维度数</span>
n<span class="token punctuation">.</span>size <span class="token comment"># 元素数</span>
np<span class="token punctuation">.</span>typeDict <span class="token comment"># np 所有数据类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="数组间的计算"><a href="#数组间的计算" class="header-anchor">#</a> 数组间的计算</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment"># 支持类似列表的切片</span>
a <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
b <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
a<span class="token operator">+</span>b <span class="token comment"># array([11, 22, 33, 44]) 矩阵相加</span>
a<span class="token operator">-</span><span class="token number">1</span> <span class="token comment"># array([ 9, 19, 29, 39])</span>
<span class="token number">4</span><span class="token operator">*</span>np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>a<span class="token punctuation">)</span>

<span class="token comment"># 以下举例数学函数，还支持非常多的数据函数</span>
a<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 40</span>
a<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 10</span>
a<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 100</span>
a<span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 11.180339887498949</span>
a<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># True</span>
a<span class="token punctuation">.</span>cumsum<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># array([ 10,  30,  60, 100])</span>
b<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 多维可以指定方向</span>
np<span class="token punctuation">.</span>negative<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 1 相反数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="逻辑"><a href="#逻辑" class="header-anchor">#</a> 逻辑</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>x <span class="token operator">=</span> <span class="token number">10</span>
np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># array(1)</span>
np<span class="token punctuation">.</span>logical_and<span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">,</span> x<span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment"># True</span>
np<span class="token punctuation">.</span>logical_or<span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">,</span> x<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment"># True</span>
np<span class="token punctuation">.</span>logical_not<span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment"># False</span>
np<span class="token punctuation">.</span>logical_xor<span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">,</span> x<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># 异或 True</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="集合"><a href="#集合" class="header-anchor">#</a> 集合</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 输出x和y的交集</span>
np<span class="token punctuation">.</span>intersect1d<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
<span class="token comment"># 输出在x中不在y中的元素</span>
np<span class="token punctuation">.</span>setdiff1d<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
<span class="token comment"># 输出x和y的并集</span>
np<span class="token punctuation">.</span>union1d<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
<span class="token comment"># 输出x和y的异或集</span>
np<span class="token punctuation">.</span>setxor1d<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="合并"><a href="#合并" class="header-anchor">#</a> 合并</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 以下方法传入的是一个 *arrays，如 (a1, a2, ...)</span>
np<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 追加, 可读性好占内存大</span>
np<span class="token punctuation">.</span>stack<span class="token punctuation">(</span><span class="token punctuation">)</span>
np<span class="token punctuation">.</span>dstack<span class="token punctuation">(</span><span class="token punctuation">)</span>
np<span class="token punctuation">.</span>vstack<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 垂直合并</span>
np<span class="token punctuation">.</span>hstack<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 水平合并</span>
np<span class="token punctuation">.</span>newaxis<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 转置</span>
np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 针对多个矩阵或序列的合并操作</span>
np<span class="token punctuation">.</span>split<span class="token punctuation">(</span>ab<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># 分隔</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="numpy常量"><a href="#numpy常量" class="header-anchor">#</a> numpy常量</h3> <table><thead><tr><th>常量</th> <th>说明</th></tr></thead> <tbody><tr><td>numpy.Inf</td> <td>（正）无穷大</td></tr> <tr><td>numpy.nan</td> <td>空值、非数值</td></tr> <tr><td>numpy.pi</td> <td>圆周率 π, pi=3.14159265...</td></tr> <tr><td>numpy.e</td> <td>自然数 e</td></tr> <tr><td>numpy.euler_gamma</td> <td>欧拉常数 γ=0.577215...</td></tr></tbody></table> <h3 id="series-2"><a href="#series-2" class="header-anchor">#</a> series</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code>s <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'数字'</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 每个元素加1 abs()</span>
s<span class="token punctuation">.</span>add_prefix<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment"># 给索引前加个3，升位</span>
s<span class="token punctuation">.</span>add_suffix<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># 同上，在后增加</span>
s<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 总和</span>
s<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 数量，长度</span>
s<span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token string">'std'</span><span class="token punctuation">)</span> <span class="token comment"># 聚合，仅返回标准差, 与 s.std() 相同</span>
s<span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'min'</span><span class="token punctuation">,</span> <span class="token string">'max'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 聚合，返回最大最小值</span>
s<span class="token punctuation">.</span>align<span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token comment"># 联接</span>
s<span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 是否有为假的</span>
s<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 是否全是真</span>
s<span class="token punctuation">.</span>append<span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token comment"># 追加另外一个 Series</span>
s<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 应用方法</span>
s<span class="token punctuation">.</span>empty <span class="token comment"># 是否为空</span>
s3 <span class="token operator">=</span> s<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 深拷贝</span>
<span class="token comment"># 等等，以上是常用的，方法非常多</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/09/25, 14:24:37</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/245196/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Python爬虫系列之urllib</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/245196/" class="prev">Python爬虫系列之urllib</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/bef152/"><div>基础知识</div></a> <span>09-22</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/245196/"><div>Python爬虫系列之urllib</div></a> <span>09-22</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="wenangonzi@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/cwenan" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2021
    <span>粤ICP备2020121415号-1</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.15790d56.js" defer></script><script src="/assets/js/2.e9821628.js" defer></script><script src="/assets/js/11.115a4f25.js" defer></script>
  </body>
</html>